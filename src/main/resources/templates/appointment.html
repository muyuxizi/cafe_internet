
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>INSPINIA | Basic Form</title>

    <link th:href="@{/static/admins/css/bootstrap.min.css}" rel="stylesheet">
    <link th:href="@{/static/admins/font-awesome/css/font-awesome.css}" rel="stylesheet">
    <link th:href="@{/static/admins/css/plugins/iCheck/custom.css}" rel="stylesheet">
    <link th:href="@{/static/admins/css/animate.css}" rel="stylesheet">
    <link th:href="@{/static/admins/css/style.css}" rel="stylesheet">

    <link th:href="@{/static/admins/css/plugins/awesome-bootstrap-checkbox/awesome-bootstrap-checkbox.css}" rel="stylesheet">

</head>

<body>

<div id="wrapper">

    <nav class="navbar-default navbar-static-side" role="navigation">
        <div class="sidebar-collapse">


        </div>
    </nav>

    <div id="page-wrapper" class="gray-bg">
        <div class="row border-bottom">
            <nav class="navbar navbar-static-top" role="navigation" style="margin-bottom: 0">
                <div class="navbar-header">
                    <a class="navbar-minimalize minimalize-styl-2 btn btn-primary " href="#"><i class="fa fa-bars"></i> </a>
                    <form role="search" class="navbar-form-custom" action="search_results.html">

                    </form>
                </div>
                <ul class="nav navbar-top-links navbar-right">
                    <li>
                        <a href="login.html">
                            <i class="fa fa-sign-out"></i> 回到主页
                        </a>
                    </li>
                </ul>

            </nav>
        </div>
        <div class="row wrapper border-bottom white-bg page-heading">
            <div class="col-lg-10">
                <h2>欢迎来到本网咖</h2>
                <ol class="breadcrumb">
                    <li class="breadcrumb-item">
                        <a href="index.html">功能</a>
                    </li>
                    <li class="breadcrumb-item active">
                        <strong>预约</strong>
                    </li>
                </ol>
            </div>
            <div class="col-lg-2">

            </div>
        </div>
        <div class="wrapper wrapper-content animated fadeInRight">

            <div class="row">
                <div class="col-lg-12">
                    <div class="ibox ">
                        <div class="ibox-title">
                            <h5>All form elements <small>With custom checbox and radion elements.</small></h5>
                            <div class="ibox-tools">
                                <a class="collapse-link">
                                    <i class="fa fa-chevron-up"></i>
                                </a>
                                <a class="dropdown-toggle" data-toggle="dropdown" href="#">
                                    <i class="fa fa-wrench"></i>
                                </a>
                                <ul class="dropdown-menu dropdown-user">
                                    <li><a href="#" class="dropdown-item">Config option 1</a>
                                    </li>
                                    <li><a href="#" class="dropdown-item">Config option 2</a>
                                    </li>
                                </ul>
                                <a class="close-link">
                                    <i class="fa fa-times"></i>
                                </a>
                            </div>
                        </div>
                        <div class="ibox-content">




                            <div class="hr-line-dashed"></div>
                            <div class="form-group row"><label class="col-sm-2 col-form-label">吸烟区选择 <br/>
                                <small class="text-navy">Normal Bootstrap elements</small></label>

                                <div class="col-sm-10">

                                    <div><label> <input type="radio" checked="checked" value="2" id="optionsRadios1" name="optionsRadios"> 吸烟区 </label></div>
                                    <div><label> <input type="radio" value="1" id="optionsRadios2" name="optionsRadios"> 无烟区</label></div>
                                </div>
                            </div>


                            <div class="hr-line-dashed"></div>
                            <div class="form-group row"><label class="col-sm-2 col-form-label">开始时间</label>

                                <div class="col-sm-10"><select class="form-control m-b" name="account" id="start_time">
                                    <option value="8">8</option>
                                    <option value="9">9</option>
                                    <option value="10">10</option>
                                    <option value="11">11</option>
                                    <option value="12">12</option>
                                    <option value="13">13</option>
                                    <option value="14">14</option>
                                    <option value="15">15</option>
                                    <option value="16">16</option>
                                    <option value="17">17</option>
                                    <option value="18">18</option>
                                    <option value="19">19</option>
                                    <option value="20">20</option>
                                    <option value="21">21</option>
                                    <option value="22">22</option>
                                    <option value="23">23</option>
                                </select>

                                </div>
                            </div>

                            <div class="form-group row"><label class="col-sm-2 col-form-label">结束时间</label>

                                <div class="col-sm-10"><select class="form-control m-b" name="account" id="end_time"  onblur="getSelect()">
                                    <option value="9">9</option>
                                    <option value="10">10</option>
                                    <option value="11">11</option>
                                    <option value="12">12</option>
                                    <option value="13">13</option>
                                    <option value="14">14</option>
                                    <option value="15">15</option>
                                    <option value="16">16</option>
                                    <option value="17">17</option>
                                    <option value="18">18</option>
                                    <option value="19">19</option>
                                    <option value="20">20</option>
                                    <option value="21">21</option>
                                    <option value="22">22</option>
                                    <option value="23">23</option>
                                </select>

                                </div>
                            </div>





                            <div class="form-group row"><label class="col-sm-2 col-form-label">可选座位</label>

                                <div class="col-sm-10"><select class="form-control m-b" name="account" id="selected_computer">

                                </select>

                                </div>
                            </div>

                            <div class="hr-line-dashed"></div>
                            <div class="form-group row">
                                <div class="col-sm-4 col-sm-offset-2">
                                    <button class="btn btn-primary btn-sm" type="submit"  id="sign-up">确认</button>
                                </div>
                            </div>
                            <span id="resultto"></span>

                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>
</div>


<!-- Mainly scripts -->
<script th:src="@{/static/admins/js/jquery-3.1.1.min.js}"></script>
<script th:src="@{/static/admins/js/popper.min.js}"></script>
<script th:src="@{/static/admins/js/bootstrap.js}"></script>
<script th:src="@{/static/admins/js/plugins/metisMenu/jquery.metisMenu.js}"></script>
<script th:src="@{/static/admins/js/plugins/slimscroll/jquery.slimscroll.min.js}"></script>

<!-- Custom and plugin javascript -->
<script th:src="@{/static/admins/js/inspinia.js}"></script>
<script th:src="@{/static/admins/js/plugins/pace/pace.min.js}"></script>

<!-- iCheck -->
<script th:src="@{/static/admins/js/plugins/iCheck/icheck.min.js}"></script>
<script>
    $(document).ready(function () {
        $('.i-checks').iCheck({
            checkboxClass: 'icheckbox_square-green',
            radioClass: 'iradio_square-green',
        });
    });
</script>
<script >

    $(document).ready(function() {
        $("#selected_computer").empty();
    });

    function getSelect(){
        var start=$("#start_time").val();
        var end=$("#end_time").val();
        var Somking=$('input[name="optionsRadios"]:checked').val();
        $("#selected_computer").empty();

        $.ajax({
            type: "POST",
            dataType: "json",
            url: '/judgeTime',
            contentType: "application/json",
            datatype: "json",
            data:JSON.stringify({
                start: start,
                end: end,
                Somking: Somking
            }),
            success: function (result) {
                $("#resultto").text(result);
            }
        });


        $.ajax({
            type: "POST",
            dataType: "json",
            url: '/loadsetts',
            contentType: "application/json",
            datatype: "json",
            data:JSON.stringify({
                start: start,
                end: end,
                Somking: Somking
            }),
            success: function (result) {
                $("#selected_computer").prepend("<option value='0'> 自动加载可占座位</option>");
                for(var i=0;i<result.length;i++)
                {
                    //alert(returnValue[i].toString());
                    //console.log($("#selected_computer"));
                    $("#selected_computer").append("<option value='"+result[i].toString()+"'>"+ result[i].toString()+"</option>");
                    //dwr.util.addOptions("number",returnValue[i].toString());
                }
                console.log($("#selected_computer").children());
            }
        });
    }

    $('#sign-up').on('click',function () {

        var start=$("#start_time").val();
        var end=$("#end_time").val();
        var isSmoking=$('input[name="optionsRadios"]:checked').val();
        var computerId=$("#selected_computer").val();
        $.ajax({
            type: "POST",
            dataType: "json",
            url: 'appointment,action',
            contentType: "application/json",
            data:JSON.stringify({
                startTime: start,
                endTime: end,
                isSmoking: isSmoking,
                computerId: computerId,
                cafeName: "wangyu"
            }),
            success: function (result) {
                var str1 = "success";
                if(result != str1) {
                    $("#resultto").text(result);
                }else {
                    alert("预约成功!");
                }
            }
        });
    });
</script>
</body>

</html>

